import{Fa as v,Ga as H,Ha as U,Ia as k,Ja as y,Ka as A,La as V,Qa as $,U as I,V as _,W as m,a as p,b as u,d as R,e as b,f as x,g as P,h as S,j as D,k as L,l as E,n as h,p as l,t as B}from"./chunk-6DXNWAL2.js";var q=function(n){return typeof n=="function"},J=function(){function n(){this._subs=[]}return n.prototype.add=function(){for(var d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];this._subs=this._subs.concat(d)},Object.defineProperty(n.prototype,"sink",{set:function(d){this._subs.push(d)},enumerable:!0,configurable:!0}),n.prototype.unsubscribe=function(){this._subs.forEach(function(d){return d&&q(d.unsubscribe)&&d.unsubscribe()}),this._subs=[]},n}();var X={production:!1,useHTTP:!1};function f(n){return n==null}function Z(){return Math.floor(Math.random()*1e5*new Date().getMilliseconds())}var C=(()=>{class n{constructor(){}hasDialog(){return typeof dialog<"u"&&typeof dialog.jsToAdvpl=="function"}hasWebChannel(){return typeof twebchannel<"u"&&typeof twebchannel.jsToAdvpl=="function"}getWebChannel(){if(this.hasWebChannel())return twebchannel;if(this.hasDialog())return dialog}jsToAdvpl(e,t){let s=this.getWebChannel();return f(s)?!1:(s.jsToAdvpl(e,t),!0)}AdvplCloseApp(e=""){this.jsToAdvpl("close",e)}buildListener(e,t){let s=this.getWebChannel();s&&s.eventTarget&&s.eventTarget.addEventListener(e,t)}buildObservable(e,t){!t.receiveId&&t.sendInfo&&!t.sendInfo.content&&(t.receiveId=t.sendInfo.type+"-"+this.generateEventId());let s=new b(a=>{let c=this.getWebChannel();c[t.receiveId]={},c[t.receiveId].subscriber=a,t.autoDestruct?(c[t.receiveId].autoDestruct=this.buildAutoDestruct(t.receiveId,e),c.eventTarget.addEventListener(t.receiveId,c[t.receiveId].autoDestruct)):c.eventTarget.addEventListener(t.receiveId,e)});return t.sendInfo&&this.connectedJsToAdvpl(t.sendInfo.type,t.sendInfo.content?t.sendInfo.content:t.receiveId),s}buildAutoDestruct(e,t){return({protheusResponse:s,subscriber:a})=>{let c=this.getWebChannel();t({protheusResponse:s,subscriber:a}),c[e]&&(c.eventTarget.removeEventListener(e,c[e].autoDestruct),delete c[e])}}protheusConnected(){let e=this.getWebChannel();return!f(e)&&e.gotConnection}connectedJsToAdvpl(e,t,s=99,a=50){this.protheusConnected()?this.jsToAdvpl(e,t):s>0?(s--,setTimeout(()=>{this.connectedJsToAdvpl(e,t,s,a)},a)):console.log("jsToAdvpl type "+e+" not executed!")}generateEventId(){return Z()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var O=(()=>{class n{setSessionInfo(){this.setCompany(JSON.parse(sessionStorage.ProCompany)),this.setBranch(JSON.parse(sessionStorage.ProBranch)),this.setModule(sessionStorage.ProModule),this.setAppName(sessionStorage.appName),this.setSystemModule(sessionStorage.ProSystemModule),this.setDataBase(sessionStorage.ProDatabase),this.setRemoteType(parseInt(sessionStorage.RemoteType)),this.setSocketPort(parseInt(sessionStorage.SocketPort)),this.setAppConfig(JSON.parse(sessionStorage.ProAppConfig)),this.setIdiom(sessionStorage.ProIdiom),this.setRole(sessionStorage.ProRole),this.setToken(JSON.parse(sessionStorage.TOKEN)),this.setErpAppConfig(JSON.parse(sessionStorage.ERPAPPCONFIG)),this.setUser(sessionStorage.ProUser),this.setErpToken(JSON.parse(sessionStorage.ERPTOKEN)),this.setTheme(JSON.parse(localStorage.getItem("ProTheme")))}getLocationPathNameEnvironment(){return location.pathname.split("/")[2]}getSessionInfo(){return{proCompany:this.getCompany(),proBranch:this.getBranch(),proModule:this.getModule(),appName:this.getAppName(),proSystemModule:this.getSystemModule(),proDatabase:this.getDataBase(),remoteRype:this.getRemoteType(),socketPort:this.getSocketPort(),proAppConfig:this.getAppConfig(),proIdiom:this.getIdiom(),proRole:this.getRole(),token:this.getToken(),erpAppConfig:this.getErpAppConfig(),proUser:this.getUser(),erpToken:this.getErpToken()}}getCompany(){let e=sessionStorage.ProCompany,t;return e&&(t=JSON.parse(e)),this.proCompany??t}getBranch(){let e=sessionStorage.ProBranch,t;return e&&(t=JSON.parse(e)),this.proBranch??t}getModule(){return this.proModule??sessionStorage.ProModule}getAppName(){return this.appName??sessionStorage.appName}getSystemModule(){let e=sessionStorage.ProSystemModule,t;return e&&(t=JSON.parse(e)),this.proSystemModule??t}getDataBase(){return this.proDataBase??sessionStorage.ProDatabase}getRemoteType(){let e=sessionStorage.RemoteType,t;return e&&(t=parseInt(e)),this.remoteType??t}getSocketPort(){let e=sessionStorage.SocketPort,t;return e&&(t=parseInt(e)),this.socketPort??t}getAppConfig(){let e=sessionStorage.ProAppConfig,t;return e&&(t=JSON.parse(e)),this.proAppConfig??t}getIdiom(){return this.proIdiom??sessionStorage.ProIdiom}getRole(){let e=sessionStorage.ProRole,t;return e&&(t=JSON.parse(e)),this.proRole??t}getToken(){let e=sessionStorage.TOKEN,t;return e&&(t=JSON.parse(e)),this.token??t}getErpAppConfig(){let e=sessionStorage.ERPAPPCONFIG,t;return e&&(t=JSON.parse(e)),this.erpAppConfig??t}getUser(){let e=sessionStorage.ProUser,t;return e&&(t=JSON.parse(e)),this.proUser??t}getErpToken(){let e=sessionStorage.ERPTOKEN,t;return e&&(t=JSON.parse(e)),this.erpToken??t}getTheme(){let e=localStorage.getItem("ProTheme"),t;return e&&(t=JSON.parse(e)),this.theme??t}setCompany(e){this.proCompany=e}setBranch(e){this.proBranch=e}setModule(e){this.proModule=e}setAppName(e){this.appName=e}setSystemModule(e){e&&(this.proSystemModule=JSON.parse(e))}setDataBase(e){this.proDataBase=e}setRemoteType(e){this.remoteType=e}setSocketPort(e){this.socketPort=e}setAppConfig(e){this.proAppConfig=e}setIdiom(e){this.proIdiom=e}setRole(e){e&&(this.proRole=JSON.parse(e))}setToken(e){this.token=e}setErpAppConfig(e){this.erpAppConfig=e}setUser(e){e&&(this.proUser=JSON.parse(e))}setErpToken(e){this.erpToken=e}setTheme(e){this.theme=e}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var N="ProUser",ee="/api/framework/v1/users",Q=(()=>{class n{constructor(e,t){this.http=e,this.advplService=t,this.useHTTP=!0,this.EVENT_GET_ID="getUserInfo",this.EVENT_SET_ID="setUserInfo",this.URL_PSWRET="/api/framework/v1/basicProtheusServices/pswret/"}get(e,t=!1){return this.useHTTP||t?this.getFromApi(e):this.getFromAdvpl(e)}getFromApi(e){let t=new I().append("X-Totvs-No-Error","true").append("Accept","application/json; charset=utf-8");return this.http.get(`${ee}/${e}`,{headers:t}).pipe(S(s=>(s.complete_name=s.userName,s)),E(s=>{sessionStorage[N]=JSON.stringify(s)}))}getFromAdvpl(e){if(!this.advplService.protheusConnected())return this.advplNotPrepared();let t=this.advplService.generateEventId(),s={sendInfo:{type:`${this.EVENT_GET_ID}#id#${t}`,content:e},autoDestruct:!0,receiveId:`${this.EVENT_SET_ID}#id#${t}`},a=({protheusResponse:c,subscriber:w})=>{if(c.length===0)w.error({status:400,description:`user ${e} could not be found`});else{let M=JSON.parse(c);M.complete_name=M.userName,sessionStorage[N]=JSON.stringify(c),w.next(M)}w.complete()};return this.advplService.buildObservable(a,s)}removeFromStorage(){sessionStorage.removeItem(N)}advplNotPrepared(){return new b(e=>{e.error({status:400,description:"advplService not prepared in ProUserInfoService"}),e.complete()})}isChannelHTTP(){return this.useHTTP}setChannelAsHTTP(e){this.useHTTP=e}pswRet(){return this.http.get(this.URL_PSWRET)}static{this.\u0275fac=function(t){return new(t||n)(l(m),l(C))}}static{this.\u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),te="/api/framework/mfa/hasSecret",oe="/api/framework/mfa/tok",ie="/api/framework/mfa/TOTPURI",re=(()=>{class n{constructor(e,t){this.http=e,this.advplService=t,this.isHTTP=!0,this.hasMFA=!1,this.isValidToken=!1,this.isSigaCfg=!1}setHasMFA(e){this.hasMFA=e}getHasMFA(){return this.hasMFA}setIsValidToken(e){this.isValidToken=e}getIsValidToken(){return this.isValidToken}setIsSigaCfg(e){this.isSigaCfg=e}getIsSigaCfg(){return this.isSigaCfg}userHasMfaSecurity(){return!this.isHTTP&&this.advplService.protheusConnected()?this.advplService.buildObservable(({protheusResponse:e,subscriber:t})=>{if(this.validResponse(e,t)){let s=JSON.parse(e);t.next(s)}t.complete()},this.getJsToAdvplSend("hasSecret","","hasSecret")):this.http.get(te)}getMfaQrCode(){return!this.isHTTP&&this.advplService.protheusConnected()?this.advplService.buildObservable(({protheusResponse:e,subscriber:t})=>{if(this.validResponse(e,t)){let s=JSON.parse(e);t.next(s)}t.complete()},this.getJsToAdvplSend("mfaQrCode","","mfaQrCode")):this.http.get(ie)}getMfaValid(e){if(!this.isHTTP&&this.advplService.protheusConnected())return this.advplService.buildObservable(({protheusResponse:t,subscriber:s})=>{if(this.validResponse(t,s)){let a=JSON.parse(t);s.next(a)}s.complete()},this.getJsToAdvplSend("mfaValidCode",e,"mfaValidCode"));{let t=new _().append("token",e);return this.http.get(oe,{params:t})}}isSIGACFG(){return!this.isHTTP||this.advplService.protheusConnected()?this.advplService.buildObservable(({protheusResponse:e,subscriber:t})=>{if(this.validResponse(e,t)){let s=JSON.parse(e);t.next(s.isConfig)}t.complete()},this.getJsToAdvplSend("isConfig","","isConfig")):P(!1)}isChannelHTTP(){return this.isHTTP}setChannelAsHTTP(e){this.isHTTP=e}validResponse(e,t){let s=e.length!==0;return s||t.error({status:401}),s}getJsToAdvplSend(e,t,s,a){return{sendInfo:{type:e,content:t},autoDestruct:a??!0,receiveId:s}}static{this.\u0275fac=function(t){return new(t||n)(l(m),l(C))}}static{this.\u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),G="ERPTOKEN",z="/api/oauth2/v1/token",K=(()=>{class n{constructor(e,t,s,a,c){this.http=e,this.proUserInfoService=t,this.advplService=s,this.sessionInfoService=a,this.proMfaService=c,this.proUserInfoService.setChannelAsHTTP(X.useHTTP)}requestLoginDefaults(){return f(this.advplService.getWebChannel())?new b(e=>{e.next({username:"",username_when:!0,password:"",remember_user:!1,show_remember_user:!1}),e.complete()}):this.advplService.buildObservable(({protheusResponse:e,subscriber:t})=>{if(e.length===0)t.next({username:"",username_when:!0,password:"",remember_user:!1,show_remember_user:!1});else{let s=JSON.parse(e);t.next(s)}t.complete()},{sendInfo:{type:"getLoginStart"},autoDestruct:!0})}requestToken(e){if(this.advplService.protheusConnected())return this.advplService.buildObservable(({protheusResponse:t,subscriber:s})=>{if(t.length===0)s.error({status:401});else{let a=JSON.parse(t);s.next(a)}s.complete()},{sendInfo:{type:"loginInside",content:btoa(JSON.stringify({usr:e.username,psw:e.password,remember:e.remember_user}))},autoDestruct:!0,receiveId:"setToken"});{let t=new I().append("X-Totvs-No-Error","true").set("grant_type","password").set("username",e.username).set("password",e.password);return this.http.post(z,{},{headers:t})}}refreshToken(e){let t=new _().set("grant_type","refresh_token").set("refresh_token",e);return this.http.post(z,{},{params:t})}login(e){let t=new x;return this.requestToken(e).subscribe({next:s=>{let a=this.getTokenPayload(s.access_token).userid;this.saveToken(s),this.saveUserInfo(a),t.next(s)},error:s=>{t.error(s)}}),t.asObservable()}passwordRecovery(e){this.advplService.jsToAdvpl("openPasswordRecovery",e)}saveToken(e){this.sessionInfoService.setErpToken(e),sessionStorage[G]=JSON.stringify(e)}saveUserInfo(e){this.proUserInfoService.get(e).subscribe(t=>{this._ProUserInfo=t})}isTokenValid(e=Date.now()){let t=Math.round(e/1e3);return this.getTokenPayload(this.token.access_token).exp-t>this.token.expires_in/10}updateToken(){return R(this,null,function*(){let e=yield this.refreshToken(this.token.refresh_token).toPromise();this.saveToken(e),this._token=e})}get userInfo(){return this._ProUserInfo}get token(){let e=this.sessionInfoService.getErpToken();return e&&(this._token=e),this._token}get isUserAuthenticate(){return!f(this.token)&&!f(this.token.access_token)}logout(){this.proMfaService.setIsValidToken(!1),this.sessionInfoService.setErpToken(void 0),sessionStorage.removeItem(G),this.proUserInfoService.removeFromStorage()}getTokenPayload(e=this.token.access_token){return JSON.parse(atob(e.split(".")[1]))}get userId(){return this.getTokenPayload().userid}showLoginMessage(){this.advplService.protheusConnected()&&this.advplService.jsToAdvpl("showLoginMessage","")}static{this.\u0275fac=function(t){return new(t||n)(l(m),l(Q),l(C),l(O),l(re))}}static{this.\u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var o={"--color-brand-01-lightest":"#d7f0fe","--color-brand-01-lighter":"#9cd8fc","--color-brand-01-light":"#6bc5fa","--color-brand-01-base":"#045b8f","--color-brand-01-dark":"#013f65","--color-brand-01-darker":"#002944","--color-brand-01-darkest":"#00182b","--color-action-default":"#045b8f","--color-action-hover":"#013f65","--color-action-pressed":"#002944","--color-action-disabled":"#b2b2b2","--color-action-focus":"#00182b","--color-neutral-light-00":"#ffffff","--color-neutral-light-05":"#f2f2f2","--color-neutral-light-10":"#e5e5e5","--color-neutral-light-20":"#cccccc","--color-neutral-light-30":"#b2b2b2","--color-neutral-mid-40":"#999999","--color-neutral-mid-60":"#666666","--color-neutral-dark-70":"#4d4d4d","--color-neutral-dark-80":"#363636","--color-neutral-dark-90":"#1a1a1a","--color-neutral-dark-95":"#0d0d0d","--color-brand-02-base":"#045b8f","--color-brand-03-base":"#045b8f","--color-feedback-negative-lightest":"#f6e6e5","--color-feedback-negative-lighter":"#e3aeab","--color-feedback-negative-light":"#d58581","--color-feedback-negative-base":"#be3e37","--color-feedback-negative-dark":"#9b2d27","--color-feedback-negative-darker":"#72211d","--color-feedback-negative-darkerst":"#4a1512","--color-feedback-info-lightest":"#e3e9f7","--color-feedback-info-lighter":"#b0c1e8","--color-feedback-info-light":"#7996d7","--color-feedback-info-base":"#23489f","--color-feedback-info-dark":"#173782","--color-feedback-info-darker":"#0f2557","--color-feedback-info-darkerst":"#081536","--color-feedback-positive-lightest":"#def7ed","--color-feedback-positive-lighter":"#7ecead","--color-feedback-positive-light":"#41b483","--color-feedback-positive-base":"#107048","--color-feedback-positive-dark":"#0f5236","--color-feedback-positive-darker":"#083a25","--color-feedback-positive-darkerst":"#002415","--color-feedback-warning-lightest":"#fcf6e3","--color-feedback-warning-lighter":"#f7dd97","--color-feedback-warning-light":"#f1cd6a","--color-feedback-warning-base":"#efba2a","--color-feedback-warning-dark":"#d8a20e","--color-feedback-warning-darker":"#705200","--color-feedback-warning-darkerst":"#473400"},i={"--color-brand-01-lightest":"#051f31","--color-brand-01-lighter":"#004064","--color-brand-01-light":"#00659a","--color-brand-01-base":"#0079b8","--color-brand-01-dark":"#3dadfa","--color-brand-01-darker":"#afd3fa","--color-brand-01-darkest":"#e3eefb","--color-action-default":"#3dadfa","--color-action-hover":"#afd3fa","--color-action-pressed":"#e3eefb","--color-action-disabled":"#7c7c7c","--color-action-focus":"#e3eefb","--color-neutral-light-00":"#1c1c1c","--color-neutral-light-05":"#202020","--color-neutral-light-10":"#2b2b2b","--color-neutral-light-20":"#3b3b3b","--color-neutral-light-30":"#5a5a5a","--color-neutral-mid-40":"#7c7c7c","--color-neutral-mid-60":"#a1a1a1","--color-neutral-dark-70":"#c1c1c1","--color-neutral-dark-80":"#d9d9d9","--color-neutral-dark-90":"#eeeeee","--color-neutral-dark-95":"#fbfbfb","--color-brand-02-base":"#3dadfa","--color-brand-03-base":"#3dadfa","--color-feedback-negative-lightest":"#4a1512","--color-feedback-negative-lighter":"#72211d","--color-feedback-negative-light":"#9b2d27","--color-feedback-negative-base":"#be3e37","--color-feedback-negative-dark":"#d58581","--color-feedback-negative-darker":"#e3aeab","--color-feedback-negative-darkerst":"#f6e6e5","--color-feedback-info-lightest":"#081536","--color-feedback-info-lighter":"#0f2557","--color-feedback-info-light":"#173782","--color-feedback-info-base":"#23489f","--color-feedback-info-dark":"#7996d7","--color-feedback-info-darker":"#b0c1e8","--color-feedback-info-darkerst":"#e3e9f7","--color-feedback-positive-lightest":"#002415","--color-feedback-positive-lighter":"#083a25","--color-feedback-positive-light":"#0f5236","--color-feedback-positive-base":"#107048","--color-feedback-positive-dark":"#41b483","--color-feedback-positive-darker":"#7ecead","--color-feedback-positive-darkerst":"#def7ed","--color-feedback-warning-lightest":"#473400","--color-feedback-warning-lighter":"#705200","--color-feedback-warning-light":"#d8a20e","--color-feedback-warning-base":"#efba2a","--color-feedback-warning-dark":"#f1cd6a","--color-feedback-warning-darker":"#f7dd97","--color-feedback-warning-darkerst":"#fcf6e3"},r={"--color-brand-01-lightest":"#ffebee","--color-brand-01-lighter":"#ef9a9a","--color-brand-01-light":"#ef5350","--color-brand-01-base":"#c20c18","--color-brand-01-dark":"#a5131a","--color-brand-01-darker":"#5d0d11","--color-brand-01-darkest":"#400a08","--color-action-default":"#c20c18","--color-action-hover":"#a5131a","--color-action-pressed":"#5d0d11","--color-action-disabled":"#b2b2b2","--color-action-focus":"#400a08","--color-neutral-light-00":"#ffffff","--color-neutral-light-05":"#f2f2f2","--color-neutral-light-10":"#e5e5e5","--color-neutral-light-20":"#cccccc","--color-neutral-light-30":"#b2b2b2","--color-neutral-mid-40":"#999999","--color-neutral-mid-60":"#666666","--color-neutral-dark-70":"#4d4d4d","--color-neutral-dark-80":"#363636","--color-neutral-dark-90":"#1a1a1a","--color-neutral-dark-95":"#0d0d0d","--color-brand-02-base":"#c20c18","--color-brand-03-base":"#c20c18","--color-feedback-negative-lightest":"#f1e8fd","--color-feedback-negative-lighter":"#d691e1","--color-feedback-negative-light":"#ba6bcd","--color-feedback-negative-base":"#7b1fa2","--color-feedback-negative-dark":"#4a148c","--color-feedback-negative-darker":"#3e166f","--color-feedback-negative-darkerst":"#1e0a36","--color-feedback-info-lightest":"#e3e9f7","--color-feedback-info-lighter":"#b0c1e8","--color-feedback-info-light":"#7996d7","--color-feedback-info-base":"#23489f","--color-feedback-info-dark":"#173782","--color-feedback-info-darker":"#0f2557","--color-feedback-info-darkerst":"#081536","--color-feedback-positive-lightest":"#def7ed","--color-feedback-positive-lighter":"#7ecead","--color-feedback-positive-light":"#41b483","--color-feedback-positive-base":"#107048","--color-feedback-positive-dark":"#0f5236","--color-feedback-positive-darker":"#083a25","--color-feedback-positive-darkerst":"#002415","--color-feedback-warning-lightest":"#fcf6e3","--color-feedback-warning-lighter":"#f7dd97","--color-feedback-warning-light":"#f1cd6a","--color-feedback-warning-base":"#efba2a","--color-feedback-warning-dark":"#d8a20e","--color-feedback-warning-darker":"#705200","--color-feedback-warning-darkerst":"#473400"},g=function(n){return n.proThemeTotvsClassic="proThemeTotvsClassic",n.proThemeTotvsSunset="proThemeTotvsSunset",n}(g||{}),T=class{constructor(){this._name="",this._type=this.getTypeStructure(),this._active=v.light}get name(){return this._name}set name(d){this._name=d}get active(){return this._active}set active(d){this._active=d}get type(){return this._type}set type(d){this._type=d}availableThemes(){return Object.values(g)}setTheme(d){let e;switch(d){case g.proThemeTotvsClassic:e=new j;break;case g.proThemeTotvsSunset:e=new F;break}this.name=e.name,this.active=e.active,this.type=e.type}getTypeStructure(){return{light:{color:{brand:{"01":{lightest:"",lighter:"",light:"",base:"",dark:"",darker:"",darkest:""},"02":{base:""},"03":{base:""}},action:p({},H),feedback:u(p({},k),{info:u(p({},k.info),{base:""})}),neutral:p({},U)}},dark:{color:{brand:{"01":{lightest:"",lighter:"",light:"",base:"",dark:"",darker:"",darkest:""},"02":{base:""},"03":{base:""}},action:{default:"",hover:"",pressed:"",disabled:"",focus:""},feedback:u(p({},k),{info:u(p({},k.info),{base:""})}),neutral:{light:{"00":"","05":"",10:"",20:"",30:""},mid:{40:"",60:""},dark:{70:"",80:"",90:"",95:""}}}}}}},j=class extends T{constructor(){super(),this.name="proThemeTotvsClassic",this.type=this.getProThemeTotvsClassic()}getProThemeTotvsClassic(){return{light:this.getProThemeTotvsClassicTokensDark(),dark:this.getProThemeTotvsClassicTokensLight()}}getProThemeTotvsClassicTokensLight(){return{color:{brand:{"01":{lightest:i["--color-brand-01-lightest"],lighter:i["--color-brand-01-lighter"],light:i["--color-brand-01-light"],base:i["--color-brand-01-base"],dark:i["--color-brand-01-dark"],darker:i["--color-brand-01-darker"],darkest:i["--color-brand-01-darkest"]},"02":{base:i["--color-brand-01-dark"]},"03":{base:i["--color-brand-01-dark"]}},action:{default:i["--color-action-default"],hover:i["--color-action-hover"],pressed:i["--color-action-pressed"],disabled:i["--color-action-disabled"],focus:i["--color-action-focus"]},neutral:{light:{10:i["--color-neutral-light-10"],20:i["--color-neutral-light-20"],30:i["--color-neutral-light-30"],"00":i["--color-neutral-light-00"],"05":i["--color-neutral-light-05"]},mid:{40:i["--color-neutral-mid-40"],60:i["--color-neutral-mid-60"]},dark:{70:i["--color-neutral-dark-70"],80:i["--color-neutral-dark-80"],90:i["--color-neutral-dark-90"],95:i["--color-neutral-dark-95"]}},feedback:{info:{base:i["--color-feedback-info-base"],lightest:i["--color-feedback-info-lightest"],lighter:i["--color-brand-info-lighter"],light:i["--color-feedback-info-light"],dark:i["--color-feedback-info-dark"],darker:i["--color-feedback-info-darker"],darkest:i["--color-feedback-info-darkerst"]},negative:{base:i["--color-feedback-negative-base"],lightest:i["--color-feedback-negative-lightest"],lighter:i["--color-brand-negative-lighter"],light:i["--color-feedback-negative-light"],dark:i["--color-feedback-negative-dark"],darker:i["--color-feedback-negative-darker"],darkest:i["--color-feedback-negative-darkerst"]},positive:{base:i["--color-feedback-positive-base"],lightest:i["--color-feedback-positive-lightest"],lighter:i["--color-brand-positive-lighter"],light:i["--color-feedback-positive-light"],dark:i["--color-feedback-positive-dark"],darker:i["--color-feedback-positive-darker"],darkest:i["--color-feedback-positive-darkerst"]},warning:{base:i["--color-feedback-warning-base"],lightest:i["--color-feedback-warning-lightest"],lighter:i["--color-brand-warning-lighter"],light:i["--color-feedback-warning-light"],dark:i["--color-feedback-warning-dark"],darker:i["--color-feedback-warning-darker"],darkest:i["--color-feedback-warning-darkerst"]}}},onRoot:u(p({},A.onRoot),{"--color-toolbar-color-default":i["--color-brand-01-dark"],"--color-widget-color-action":i["--color-brand-01-dark"],"--color-neutral":i["--color-neutral-dark-70"],"--color-secondary":i["--color-action-default"],"--color-secondary-light-20":i["--color-brand-01-lighter"],"--color-secondary-light-40":i["--color-brand-01-light"],"--color-secondary-dark-20":i["--color-brand-01-dark"],"--color-secondary-dark-40":i["--color-brand-01-darker"],"--color-secondary-dark-80":i["--color-brand-01-darkest"],"--color-primary":i["--color-brand-02-base"],"--color-primary-light-80":"color-mix(in srgb, "+i["--color-brand-02-base"]+" 80%, black)","--color-primary-light-95":"color-mix(in srgb, "+i["--color-brand-02-base"]+" 95%, black)","--color-primary-alpha-50":"color-mix(in srgb, "+i["--color-brand-02-base"]+" 50%, white)","--color-primary-dark-20":"color-mix(in srgb, "+i["--color-brand-02-base"]+" 20%, white)","--color-primary-dark-40":"color-mix(in srgb, "+i["--color-brand-02-base"]+" 40%, white)","--color-secondary-dark-60-alpha-70":"color-mix(in srgb, "+i["--color-neutral-mid-60"]+" 70%, white)","--color-tertiary-light-90":"color-mix(in srgb, "+i["--color-brand-03-base"]+" 90%, black)","--color-tertiary-dark-5":"color-mix(in srgb, "+i["--color-brand-03-base"]+" 5%, white)","--color-calendar-background-color-box-background-range":i["--color-brand-01-lightest"],"--font-family-theme":"NunitoSans, sans-serif","--font-family-theme-bold":"NunitoSans-Bold, sans-serif","--font-family-theme-extra-light":"NunitoSans-ExtraLight, sans-serif","--font-family-heading":"NunitoSans, sans-serif","--font-family-code":"Monospace","--font-family":"NunitoSans, sans-serif"}),perComponent:u(p({},A.perComponent),{"po-popup po-item-list":{"--color":i["--color-brand-01-dark"]}})}}getProThemeTotvsClassicTokensDark(){return{color:{brand:{"01":{lightest:o["--color-brand-01-lightest"],lighter:o["--color-brand-01-lighter"],light:o["--color-brand-01-light"],base:o["--color-brand-01-base"],dark:o["--color-brand-01-dark"],darker:o["--color-brand-01-darker"],darkest:o["--color-brand-01-darkest"]},"02":{base:o["--color-brand-02-base"]},"03":{base:o["--color-brand-03-base"]}},action:{default:o["--color-action-default"],hover:o["--color-action-hover"],pressed:o["--color-action-pressed"],disabled:o["--color-action-disabled"],focus:o["--color-action-focus"]},neutral:{light:{10:o["--color-neutral-light-10"],20:o["--color-neutral-light-20"],30:o["--color-neutral-light-30"],"00":o["--color-neutral-light-00"],"05":o["--color-neutral-light-05"]},mid:{40:o["--color-neutral-mid-40"],60:o["--color-neutral-mid-60"]},dark:{70:o["--color-neutral-dark-70"],80:o["--color-neutral-dark-80"],90:o["--color-neutral-dark-90"],95:o["--color-neutral-dark-95"]}},feedback:{info:{base:o["--color-feedback-info-base"],lightest:o["--color-feedback-info-lightest"],lighter:o["--color-brand-info-lighter"],light:o["--color-feedback-info-light"],dark:o["--color-feedback-info-dark"],darker:o["--color-feedback-info-darker"],darkest:o["--color-feedback-info-darkerst"]},negative:{base:o["--color-feedback-negative-base"],lightest:o["--color-feedback-negative-lightest"],lighter:o["--color-brand-negative-lighter"],light:o["--color-feedback-negative-light"],dark:o["--color-feedback-negative-dark"],darker:o["--color-feedback-negative-darker"],darkest:o["--color-feedback-negative-darkerst"]},positive:{base:o["--color-feedback-positive-base"],lightest:o["--color-feedback-positive-lightest"],lighter:o["--color-brand-positive-lighter"],light:o["--color-feedback-positive-light"],dark:o["--color-feedback-positive-dark"],darker:o["--color-feedback-positive-darker"],darkest:o["--color-feedback-positive-darkerst"]},warning:{base:o["--color-feedback-warning-base"],lightest:o["--color-feedback-warning-lightest"],lighter:o["--color-brand-warning-lighter"],light:o["--color-feedback-warning-light"],dark:o["--color-feedback-warning-dark"],darker:o["--color-feedback-warning-darker"],darkest:o["--color-feedback-warning-darkerst"]}}},onRoot:u(p({},y.onRoot),{"--color-toolbar-color-default":o["--color-brand-02-base"],"--color-widget-color-action":o["--color-brand-02-base"],"--color-neutral":o["--color-neutral-dark-70"],"--color-secondary":o["--color-brand-01-base"],"--color-secondary-light-20":o["--color-brand-01-lighter"],"--color-secondary-light-40":o["--color-brand-01-light"],"--color-secondary-dark-20":o["--color-brand-01-dark"],"--color-secondary-dark-40":o["--color-brand-01-darker"],"--color-secondary-dark-80":o["--color-brand-01-darkest"],"--color-primary":o["--color-brand-02-base"],"--color-primary-light-80":"color-mix(in srgb, "+o["--color-brand-02-base"]+" 80%, white)","--color-primary-light-95":"color-mix(in srgb, "+o["--color-brand-02-base"]+" 95%, white)","--color-primary-alpha-50":"color-mix(in srgb, "+o["--color-brand-02-base"]+" 50%, black)","--color-primary-dark-20":"color-mix(in srgb, "+o["--color-brand-02-base"]+" 20%, black)","--color-primary-dark-40":"color-mix(in srgb, "+o["--color-brand-02-base"]+" 40%, black)","--color-secondary-dark-60-alpha-70":"color-mix(in srgb, "+o["--color-neutral-mid-60"]+" 70%, black)","--color-tertiary-light-90":"color-mix(in srgb, "+o["--color-brand-03-base"]+" 90%, white)","--color-tertiary-dark-5":"color-mix(in srgb, "+o["--color-brand-03-base"]+" 5%, black)","--color-calendar-background-color-box-background-range":o["--color-brand-01-lightest"],"--font-family-theme":"NunitoSans, sans-serif","--font-family-theme-bold":"NunitoSans-Bold, sans-serif","--font-family-theme-extra-light":"NunitoSans-ExtraLight, sans-serif","--font-family-heading":"NunitoSans, sans-serif","--font-family-code":"Monospace","--font-family":"NunitoSans, sans-serif"}),perComponent:u(p({},y.perComponent),{"po-popup po-item-list":{"--color":o["--color-brand-02-base"]}})}}},F=class extends T{constructor(){super(),this.name="proThemeTotvsSunset",this.type=this.getProThemeTotvsSunset()}getProThemeTotvsSunset(){return{light:this.getProThemeTotvsSunsetTokensLight()}}getProThemeTotvsSunsetTokensLight(){return{color:{brand:{"01":{lightest:r["--color-brand-01-lightest"],lighter:r["--color-brand-01-lighter"],light:r["--color-brand-01-light"],base:r["--color-brand-01-base"],dark:r["--color-brand-01-dark"],darker:r["--color-brand-01-darker"],darkest:r["--color-brand-01-darkest"]},"02":{base:r["--color-brand-02-base"]},"03":{base:r["--color-brand-03-base"]}},action:{default:r["--color-action-default"],hover:r["--color-action-hover"],pressed:r["--color-action-pressed"],disabled:r["--color-action-disabled"],focus:r["--color-action-focus"]},neutral:{light:{10:r["--color-neutral-light-10"],20:r["--color-neutral-light-20"],30:r["--color-neutral-light-30"],"00":r["--color-neutral-light-00"],"05":r["--color-neutral-light-05"]},mid:{40:r["--color-neutral-mid-40"],60:r["--color-neutral-mid-60"]},dark:{70:r["--color-neutral-dark-70"],80:r["--color-neutral-dark-80"],90:r["--color-neutral-dark-90"],95:r["--color-neutral-dark-95"]}},feedback:{info:{base:r["--color-feedback-info-base"],lightest:r["--color-feedback-info-lightest"],lighter:r["--color-brand-info-lighter"],light:r["--color-feedback-info-light"],dark:r["--color-feedback-info-dark"],darker:r["--color-feedback-info-darker"],darkest:r["--color-feedback-info-darkerst"]},negative:{base:r["--color-feedback-negative-base"],lightest:r["--color-feedback-negative-lightest"],lighter:r["--color-brand-negative-lighter"],light:r["--color-feedback-negative-light"],dark:r["--color-feedback-negative-dark"],darker:r["--color-feedback-negative-darker"],darkest:r["--color-feedback-negative-darkerst"]},positive:{base:r["--color-feedback-positive-base"],lightest:r["--color-feedback-positive-lightest"],lighter:r["--color-brand-positive-lighter"],light:r["--color-feedback-positive-light"],dark:r["--color-feedback-positive-dark"],darker:r["--color-feedback-positive-darker"],darkest:r["--color-feedback-positive-darkerst"]},warning:{base:r["--color-feedback-warning-base"],lightest:r["--color-feedback-warning-lightest"],lighter:r["--color-brand-warning-lighter"],light:r["--color-feedback-warning-light"],dark:r["--color-feedback-warning-dark"],darker:r["--color-feedback-warning-darker"],darkest:r["--color-feedback-warning-darkerst"]}}},onRoot:u(p({},y.onRoot),{"--color-toolbar-color-default":r["--color-brand-02-base"],"--color-widget-color-action":r["--color-brand-02-base"],"--color-neutral":r["--color-neutral-dark-70"],"--color-secondary":r["--color-brand-01-base"],"--color-secondary-light-20":r["--color-brand-01-lighter"],"--color-secondary-light-40":r["--color-brand-01-light"],"--color-secondary-dark-20":r["--color-brand-01-dark"],"--color-secondary-dark-40":r["--color-brand-01-darker"],"--color-secondary-dark-80":r["--color-brand-01-darkest"],"--color-primary":r["--color-brand-02-base"],"--color-primary-light-80":"color-mix(in srgb, "+r["--color-brand-02-base"]+" 80%, white)","--color-primary-light-95":"color-mix(in srgb, "+r["--color-brand-02-base"]+" 95%, white)","--color-primary-alpha-50":"color-mix(in srgb, "+r["--color-brand-02-base"]+" 50%, black)","--color-primary-dark-20":"color-mix(in srgb, "+r["--color-brand-02-base"]+" 20%, black)","--color-primary-dark-40":"color-mix(in srgb, "+r["--color-brand-02-base"]+" 40%, black)","--color-secondary-dark-60-alpha-70":"color-mix(in srgb, "+r["--color-neutral-mid-60"]+" 70%, black)","--color-tertiary-light-90":"color-mix(in srgb, "+r["--color-brand-03-base"]+" 90%, white)","--color-tertiary-dark-5":"color-mix(in srgb, "+r["--color-brand-03-base"]+" 5%, black)","--color-calendar-background-color-box-background-range":r["--color-brand-01-lightest"],"--font-family-theme":"NunitoSans, sans-serif","--font-family-theme-bold":"NunitoSans-Bold, sans-serif","--font-family-theme-extra-light":"NunitoSans-ExtraLight, sans-serif","--font-family-heading":"NunitoSans, sans-serif","--font-family-code":"Monospace","--font-family":"NunitoSans, sans-serif"}),perComponent:u(p({},y.perComponent),{"po-popup po-item-list":{"--color":r["--color-brand-02-base"]}})}}},ne=(()=>{class n{constructor(e,t){this.http=e,this.poI18nService=t,this.URL_PROFILE="/api/framework/v1/profileService/",this.programName="",this.task="",this.type="",this.isReady=!1;let s=this.poI18nService.getShortLanguage();t.getLiterals({language:s,context:"general"}).subscribe(a=>{this.literals=a})}setProfile(e,t,s){this.programName=e,this.task=t,this.type=s,this.isReady=!0}create(e){let t=this.getRequisitionBody(e);return this.isReady?this.http.post(this.URL_PROFILE,t):this.profileNotReady()}read(e="",t="json"){if(this.isReady){let s="application/json";t!="json"&&(t="text",s="text/plain");let a=new _().set("defaultValue",e),c=new I().set("Accept",s);return this.http.get(this.getUrlApi(),{responseType:t,params:a,headers:c})}else return this.profileNotReady()}update(e){let t=this.getRequisitionBody(e);return this.isReady?this.http.put(this.getUrlApi(),t):this.profileNotReady()}delete(){return this.isReady?this.http.delete(this.getUrlApi()):this.profileNotReady()}deleteThenCreate(e){return this.isReady?this.http.delete(this.getUrlApi()).pipe(D(()=>P(this.http.post(this.URL_PROFILE,this.getRequisitionBody(e)))),L(()=>this.http.post(this.URL_PROFILE,this.getRequisitionBody(e)))):this.profileNotReady()}profileNotReady(){return new b(e=>{e.error({status:400,message:this.literals.str0001}),e.complete()})}getUrlApi(){return`${this.URL_PROFILE}${this.programName}/${this.task}/${this.type}`}getRequisitionBody(e){return{programName:this.programName,task:this.task,type:this.type,value:e}}static{this.\u0275fac=function(t){return new(t||n)(l(m),l($))}}static{this.\u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var se=(()=>{class n{constructor(e,t,s,a){this.poTheme=e,this.proJsToAdvplService=t,this.proUserProfileService=s,this.proSessionInfoService=a,this.proTheme=new T}setTheme(e,t){let s=this.getProtheusConfig();if(e)this.proTheme.setTheme(e),this.poTheme.setTheme(this.proTheme,t);else switch(s?.Configuration){case 0:this.proTheme.setTheme(g.proThemeTotvsClassic),this.poTheme.setTheme(this.proTheme,v.light);break;case 1:this.proTheme.setTheme(g.proThemeTotvsClassic),this.poTheme.setTheme(this.proTheme,v.dark);break;case 2:this.proTheme.setTheme(g.proThemeTotvsSunset),this.poTheme.setTheme(this.proTheme,v.light);break;default:this.proTheme.setTheme(g.proThemeTotvsClassic),this.poTheme.setTheme(this.proTheme,v.light)}}getProtheusConfig(){return this.proSessionInfoService.getTheme()}canUseDarkTheme(){return this.proJsToAdvplService.protheusConnected()?this.checkDarkFromAdvpl():P(!0)}checkDarkFromAdvpl(){return this.proJsToAdvplService.buildObservable(({protheusResponse:e,subscriber:t})=>{e.length===0?t.next(!1):e==="true"?t.next(!0):t.next(!1),t.complete()},{autoDestruct:!0,receiveId:"canUseDarkTheme",sendInfo:{type:"canUseDarkTheme"}})}setThemeProfile(e){return this.proJsToAdvplService.protheusConnected()?this.setThemeProfileFromAdvpl(e):this.setThemeProfileFromApi(e)}setThemeProfileFromAdvpl(e){return this.proJsToAdvplService.buildObservable(({protheusResponse:t,subscriber:s})=>{t.length===0?s.next(!1):t==="true"?s.next(!0):s.next(!1),s.complete()},{autoDestruct:!0,receiveId:"setThemeProfile",sendInfo:{type:"setThemeProfile",content:e}})}setThemeProfileFromApi(e){return this.proUserProfileService.setProfile("wAPIpLOGIN","CONFIG","DARK"),this.proUserProfileService.update(e)}getThemeProfile(){return this.proJsToAdvplService.protheusConnected()?this.getThemeProfileFromAdvpl():this.getThemeProfileFromApi()}getThemeProfileFromAdvpl(){return this.proJsToAdvplService.buildObservable(({protheusResponse:e,subscriber:t})=>{e.length===0?t.next(!1):e==="true"?t.next(!0):t.next(!1),t.complete()},{autoDestruct:!0,receiveId:"getDarkUserProfile",sendInfo:{type:"getDarkUserProfile"}})}getThemeProfileFromApi(){return this.proUserProfileService.setProfile("wAPIpLOGIN","CONFIG","DARK"),this.proUserProfileService.read("true","text").pipe(S(e=>e==="true"))}static{this.\u0275fac=function(t){return new(t||n)(l(V),l(C),l(ne),l(O))}}static{this.\u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var W="ERPAPPCONFIG",jt=(()=>{class n{constructor(e,t,s,a,c){this.http=e,this.advplService=t,this.themeService=s,this.sessionInfoService=a,this.proAuthService=c,this.readyEmitter=new B,this.themeService.setTheme()}loadAppConfig(){return this.isProtheusRender&&this.insideProtheus()&&this.proAuthService.isUserAuthenticate&&this.sessionInfoService.setSessionInfo(),this.http.get("assets/data/appConfig.json").toPromise().then(e=>{let t=e;return sessionStorage[W]===void 0&&(sessionStorage[W]=JSON.stringify(t)),this.readyEmitter.emit(),this.proAppConfig})}callAppClose(e=!0){e?this.advplService.AdvplCloseApp("force"):this.advplService.AdvplCloseApp()}insideProtheus(){return this.advplService.protheusConnected()}get proAppConfig(){return f(this._ProAppConfig)&&(this._ProAppConfig=this.sessionInfoService.getErpAppConfig()),this._ProAppConfig}get nameApp(){return this.proAppConfig.name}get serverWithApiUrl(){return this.proAppConfig?f(this.proAppConfig.api_baseUrl)?this.proAppConfig.serverBackend+this.proAppConfig.restEntryPoint:this.proAppConfig.api_baseUrl:""}get productLine(){return this.proAppConfig?this.proAppConfig.productLine:""}get isProtheusRender(){return this.productLine.toLowerCase()==="protheus"}freeAppConfig(){this._ProAppConfig=null}static{this.\u0275fac=function(t){return new(t||n)(l(m),l(C),l(se),l(O),l(K))}}static{this.\u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ft=(()=>{class n{constructor(e,t){this.proAuthService=e,this.proUserInfoService=t}get proThreadInfo(){let e=this.proAuthService.getTokenPayload(),t={};return t.userId=e.userid,t.userName=e.sub,t}get userId(){return this.proAuthService.userId}get userName(){return this.proThreadInfo.userName}getUserInfoThread(){return this.proUserInfoService.get(this.userId,!0).pipe(S(e=>({id:e.id,userName:e.userName,displayName:e.displayName,emails:e.emails})))}static{this.\u0275fac=function(t){return new(t||n)(l(K),l(Q))}}static{this.\u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{jt as a,Ft as b};
